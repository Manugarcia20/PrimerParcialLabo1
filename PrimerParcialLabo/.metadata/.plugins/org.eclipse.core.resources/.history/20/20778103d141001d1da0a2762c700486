/*
 * funciones.c
 *
 *  Created on: 1 oct. 2022
 *      Author: manu
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "input.h"
#include "funciones.h"


void CargarPrecio(float *precio, char mensaje[], char mensajeError[]) {
		char auxPrecio[51];

		printf("%s", mensaje);
		scanf("%s", auxPrecio);

		while (!(esNumericoFlotante(auxPrecio))) {
			printf("%s", mensajeError);
			scanf("%s", auxPrecio);
		}

		*precio = atof(auxPrecio);

	}

int MostrarUnLibro(eLibro libro, eAutor autores[],eEditorial editoriales[], int tamL, int tamA,ePais paises[],int tamP){
		int isOk = 0;
		char descAutor[20];
		char descEditorial[20];
		char descPais[20];

		if(autores != NULL && tamL > 0)
		{
		CargarDescripcionAutor(autores, tamL, libro.idAutor, descAutor);
		CargarDescripcionEditorial(editoriales,tamL, libro.idEditorial, descEditorial);
		CargarDescripcionPais(paises,tamP,paises->idPais,descPais);

		printf("\n%d\t%s\t%d/%d/%d/t%.2f/t%s/tS/t%s/t\n",    						libro.idLibro,
															 	     libro.titulo,
																	 libro.fecha.dia,
																	 libro.fecha.mes,
																	 libro.fecha.anio,
																  	 libro.importe,
																	 descAutor,
																	 descPais,
																	 descEditorial
																  );

		isOk = 1;
		}
		return isOk;
	}

int MostrarListaLibros(eLibro libros[], int tamL, eAutor autores[], int tamA, eEditorial editoriales[], int tamE, ePais paises[],int tamP, int id) {

	int i;
	int isOK = 0;

	if (libros != NULL && tamL > 0) {

		printf("---------------------------------------------------------------------------------------------------------\n");
		printf("\n		*** LISTA DE LIBROS ***		\n");
		printf("--------------------------------------------------------------------------------------------------------\n");
		printf("ID\tTITULO\tFECHA DE PUBLICACION\tPRECIO\t\tAUTOR\t\tNACIONALIDAD\tEDITORIAL\t\n");
		printf("---------------------------------------------------------------------------------------------------------\n");

		for (i = 0; i < tamL; i++) {
			if (libros[i].estado == LLENO) {
				MostrarUnLibro(libros[i],autores,editoriales,tamA, tamE,paises,tamP,id);
			}
			isOK = 1;
		}
	}

	return isOK;
}





